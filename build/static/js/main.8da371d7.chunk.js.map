{"version":3,"sources":["logo.svg","data/config.js","interfaces/video.js","interfaces/modernizr.js","interfaces/state.js","interfaces/analytics/ga-events.js","interfaces/getUserMedia.js","interfaces/tensorflow.js","tensorflow-test/index.js","animations/common.js","animations/index.js","animations/scanning.js","animations/prize-reveal.js","scanner/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","dev_mode","process","override_country","override_language","api","override_live","override_win","override_lose","tensorflow","scanTimeout","debugProceed","WIDTH","HEIGHT","threshold","samplerate","OREO_CLASSES","FAKE","REAL","NONE","pwa","toastTimeout","iosTipTimeout","recaptcha_key","canvas","document","createElement","getContext","width","config","height","initCamera","curryN","video","mediaStream","a","srcObject","Promise","resolve","reject","onloadedmetadata","play","addEventListener","onerror","initSrc","src","pause","e","n","t","r","arguments","w","createElementNS","call","apply","l","i","o","u","d","f","p","c","body","fake","s","parseInt","id","appendChild","type","styleSheet","cssText","createTextNode","style","background","overflow","S","parentNode","removeChild","offsetHeight","indexOf","replace","toLowerCase","getComputedStyle","console","getPropertyValue","error","currentStyle","length","CSS","supports","push","join","toUpperCase","m","P","modElem","v","y","g","shift","h","charAt","slice","E","split","L","C","_version","_config","classPrefix","enableClasses","enableJSClass","usePrefixes","_q","on","this","setTimeout","addTest","name","fn","options","addAsyncTest","Modernizr","prototype","b","documentElement","nodeName","x","matchMedia","msMatchMedia","matches","position","mq","T","_cssomPrefixes","_","elem","unshift","_domPrefixes","testAllProps","z","prefixes","CSSRule","atRule","N","prefixed","aliases","canPlayType","Boolean","ogg","h264","webm","vp9","hls","q","testStyles","formvalidationapi","opera","operamini","preventDefault","stopPropagation","innerHTML","getElementsByTagName","formvalidationmessage","validationMessage","click","navigator","mediaDevices","hasOwnProperty","className","baseVal","RegExp","M","window","listeners","state","load","set","curry","key","value","trigger","filter","savedState","localStorage","getItem","JSON","parse","forEach","stream","model","ctx","vid","tf","all_events","events","reduce","acc","data","ga","category","action","fps","label","createEvent","constraints","facingMode","undefined","LOADING","CANCEL","hasStream","getStream","getusermedia","getUserMedia","ga_events","allowed_camera","classList","add","stopStream","Error","Array","from","getVideoTracks","track","stop","remove","valueSort","toObj","rafId","isLoaded","firstPrediction","pixels","fromPixels","preprocessedInput","resizeNearestNeighbor","toFloat","div","reshapedInput","reshape","shape","logits","predict","log","predictions","tidy","then","dispose","oreoFound","pipe","head","allPass","propEq","propSatisfies","lt","HTMLVideoElement","loadModel","find","callback","clearTimeout","loop","findLoop","string","drawImage","videoWidth","videoHeight","getPredictions","values","map","sort","TensorflowTest","props","ready","widthFirst","widthSecond","widthThird","path","container","setState","tid","refs","catch","stack","prePros","w2","toFixed","location","assign","ref","muted","playsInline","autoPlay","renderPredictionGraph","w0","w1","container1","zIndex","overflowX","backgroundColor","transition","textAlign","color","fontFamily","top","container2","container3","spanStyle","display","holder","bottom","left","prediction","Component","SWIPE_DISTANCE","Math","min","innerWidth","defaultDuration","duration","fadeIn","opacity","fadeOut","easeInOutQuad","easing","fadeEnter","delay","fadeExit","Animation","translateX","mergeDeepRight","converge","assoc","keys","identity","params","runtime","anime","common","timings","targets","target","innerHeight","parseFloat","getAttribute","prizeRevealEnterFadeOut","pathChanged","repeat","__","useWith","complement","equals","locationChanged","webGLStatusChanged","App","hostname","match","ReactDOM","render","getElementById","serviceWorker","registration","unregister","message"],"mappings":"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","file":"static/js/main.8da371d7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","const is_dev = process.env.NODE_ENV === \"development\";\nconst oreo_official_recaptcha_key = \"6LeJoo0UAAAAAOiGx5r4k2h2nbXshF-jmN1uDzUV\";\nconst localhost_recaptcha_key     = \"6LeEwo0UAAAAAGjZX1_Um9P8IupZ557VMidHnlQ_\";\n// automatically setting recaptcha key here based on dev mode or not\nconst recaptcha_key               = is_dev ?\n    localhost_recaptcha_key : oreo_official_recaptcha_key;\n\nexport default {\n    // dev mode enables routes on all pages, without this you can't nav to /prize-reveal (for example)\n    dev_mode          : is_dev && false,\n    // allows you to override the user's country\n    override_country  : is_dev ? \"\" : \"\",\n    override_language : is_dev ? \"\" : \"\",\n    api               : {\n        // used to override the live state with a value (helpful if someone else is testing with time-travel)\n        override_live : is_dev && {isLive: false},\n        // use to make it so you can always win (helpful for testing the win animations)\n        override_win  : is_dev && false,\n        override_lose : is_dev && false\n    },\n    tensorflow : {\n        // this controls how long we will wait before showing the help message\n        scanTimeout  : 3000,\n        // if true, this allows you to tap on the scanner screen three times rather than showing an actual cookie\n        debugProceed : is_dev && false,\n        // width/height are the size of the canvas sent to tensorflow (DO NOT EDIT)\n        WIDTH        : 256,\n        HEIGHT       : 256,\n        // how confident must we be (e.g. 70%) that an oreo cookie has been found before proceeding?\n        threshold    : .8,\n        // how often do we sample the camera feed to run predictions?\n        samplerate   : 1000,\n        // used by tf.js (DO NOT EDIT)\n        OREO_CLASSES : [\n            \"Fake Oreo\",\n            \"No Cookie\",\n            \"Real Oreo\"\n        ],\n        // used by tf.js (DO NOT EDIT)\n        FAKE : \"Fake Oreo\",\n        REAL : \"Real Oreo\",\n        NONE : \"No Cookie\"\n    },\n    pwa : {\n        toastTimeout  : 8000,\n        iosTipTimeout : 5000\n    },\n    recaptcha_key\n};\n","import config from \"../data/config\";\nimport {curryN} from \"ramda\";\n\nconst canvas   = document.createElement(\"canvas\");\nconst ctx      = canvas.getContext(\"2d\");\n\ncanvas.width   = config.WIDTH;\ncanvas.height  = config.HEIGHT;\n\nexport const initCamera = curryN(2, async (video, mediaStream) => {\n\n    if (video.srcObject === mediaStream) {\n        return Promise.resolve(video);\n    }\n    video.srcObject = mediaStream;\n    return new Promise((resolve, reject) => {\n        video.onloadedmetadata = () => {\n            video.play();\n            video.addEventListener(\"playing\", () => resolve(video));\n        };\n        video.onerror = reject;\n    });\n});\n\nexport const initSrc = curryN(2, async (video, src) => {\n    return new Promise((resolve, reject) => {\n        video.pause();\n        video.src = src;\n        video.onloadedmetadata = () => {\n            video.play();\n            video.height = 256;\n            video.width  = 256;\n            video.addEventListener(\"playing\", () => {\n                resolve(video);\n            });\n        };\n        video.onerror = reject;\n    });\n});\n","/* eslint-disable */\n/*! modernizr 3.6.0 (Custom Build) | MIT *\n * https://modernizr.com/download/?-devicemotion_deviceorientation-formvalidation-getusermedia-pagevisibility-requestanimationframe-video-webgl-mq-prefixed-setclasses !*/\n!(function(e,n,t){function r(e,n){return typeof e===n}function i(){var e,n,t,i,o,a,s;for(var l in h)if(h.hasOwnProperty(l)){if(e=[],n=h[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(i=r(n.fn,\"function\")?n.fn():n.fn,o=0;o<e.length;o++)a=e[o],s=a.split(\".\"),1===s.length?Modernizr[s[0]]=i:(!Modernizr[s[0]]||Modernizr[s[0]]instanceof Boolean||(Modernizr[s[0]]=new Boolean(Modernizr[s[0]])),Modernizr[s[0]][s[1]]=i),b.push((i?\"\":\"no-\")+s.join(\"-\"))}}function o(e){var n=S.className,t=Modernizr._config.classPrefix||\"\";if(w&&(n=n.baseVal),Modernizr._config.enableJSClass){var r=new RegExp(\"(^|\\\\s)\"+t+\"no-js(\\\\s|$)\");n=n.replace(r,\"$1\"+t+\"js$2\")}Modernizr._config.enableClasses&&(n+=\" \"+t+e.join(\" \"+t),w?S.className.baseVal=n:S.className=n)}function a(){return\"function\"!=typeof n.createElement?n.createElement(arguments[0]):w?n.createElementNS.call(n,\"http://www.w3.org/2000/svg\",arguments[0]):n.createElement.apply(n,arguments)}function s(){var e=n.body;return e||(e=a(w?\"svg\":\"body\"),e.fake=!0),e}function l(e,t,r,i){var o,l,u,d,f=\"modernizr\",p=a(\"div\"),c=s();if(parseInt(r,10))for(;r--;)u=a(\"div\"),u.id=i?i[r]:f+(r+1),p.appendChild(u);return o=a(\"style\"),o.type=\"text/css\",o.id=\"s\"+f,(c.fake?c:p).appendChild(o),c.appendChild(p),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(n.createTextNode(e)),p.id=f,c.fake&&(c.style.background=\"\",c.style.overflow=\"hidden\",d=S.style.overflow,S.style.overflow=\"hidden\",S.appendChild(c)),l=t(p,e),c.fake?(c.parentNode.removeChild(c),S.style.overflow=d,S.offsetHeight):p.parentNode.removeChild(p),!!l}function u(e,n){return!!~(\"\"+e).indexOf(n)}function d(e){return e.replace(/([A-Z])/g,function(e,n){return\"-\"+n.toLowerCase()}).replace(/^ms-/,\"-ms-\")}function f(n,t,r){var i;if(\"getComputedStyle\"in e){i=getComputedStyle.call(e,n,t);var o=e.console;if(null!==i)r&&(i=i.getPropertyValue(r));else if(o){var a=o.error?\"error\":\"log\";o[a].call(o,\"getComputedStyle returning null, its possible modernizr test results are inaccurate\")}}else i=!t&&n.currentStyle&&n.currentStyle[r];return i}function p(n,r){var i=n.length;if(\"CSS\"in e&&\"supports\"in e.CSS){for(;i--;)if(e.CSS.supports(d(n[i]),r))return!0;return!1}if(\"CSSSupportsRule\"in e){for(var o=[];i--;)o.push(\"(\"+d(n[i])+\":\"+r+\")\");return o=o.join(\" or \"),l(\"@supports (\"+o+\") { #modernizr { position: absolute; } }\",function(e){return\"absolute\"==f(e,null,\"position\")})}return t}function c(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,\"\")}function m(e,n,i,o){function s(){d&&(delete P.style,delete P.modElem)}if(o=r(o,\"undefined\")?!1:o,!r(i,\"undefined\")){var l=p(e,i);if(!r(l,\"undefined\"))return l}for(var d,f,m,v,y,g=[\"modernizr\",\"tspan\",\"samp\"];!P.style&&g.length;)d=!0,P.modElem=a(g.shift()),P.style=P.modElem.style;for(m=e.length,f=0;m>f;f++)if(v=e[f],y=P.style[v],u(v,\"-\")&&(v=c(v)),P.style[v]!==t){if(o||r(i,\"undefined\"))return s(),\"pfx\"==n?v:!0;try{P.style[v]=i}catch(h){}if(P.style[v]!=y)return s(),\"pfx\"==n?v:!0}return s(),!1}function v(e,n){return function(){return e.apply(n,arguments)}}function y(e,n,t){var i;for(var o in e)if(e[o]in n)return t===!1?e[o]:(i=n[e[o]],r(i,\"function\")?v(i,t||n):i);return!1}function g(e,n,t,i,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+\" \"+E.join(a+\" \")+a).split(\" \");return r(n,\"string\")||r(n,\"undefined\")?m(s,n,i,o):(s=(e+\" \"+L.join(a+\" \")+a).split(\" \"),y(s,n,t))}var h=[],C={_version:\"3.6.0\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){h.push({name:e,fn:n,options:t})},addAsyncTest:function(e){h.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=C,Modernizr=new Modernizr;var b=[],S=n.documentElement,w=\"svg\"===S.nodeName.toLowerCase(),x=function(){var n=e.matchMedia||e.msMatchMedia;return n?function(e){var t=n(e);return t&&t.matches||!1}:function(n){var t=!1;return l(\"@media \"+n+\" { #modernizr { position: absolute; } }\",function(n){t=\"absolute\"==(e.getComputedStyle?e.getComputedStyle(n,null):n.currentStyle).position}),t}}();C.mq=x;var T=\"Moz O ms Webkit\",E=C._config.usePrefixes?T.split(\" \"):[];C._cssomPrefixes=E;var _={elem:a(\"modernizr\")};Modernizr._q.push(function(){delete _.elem});var P={style:_.elem.style};Modernizr._q.unshift(function(){delete P.style});var L=C._config.usePrefixes?T.toLowerCase().split(\" \"):[];C._domPrefixes=L,C.testAllProps=g;var z=function(n){var r,i=prefixes.length,o=e.CSSRule;if(\"undefined\"==typeof o)return t;if(!n)return!1;if(n=n.replace(/^@/,\"\"),r=n.replace(/-/g,\"_\").toUpperCase()+\"_RULE\",r in o)return\"@\"+n;for(var a=0;i>a;a++){var s=prefixes[a],l=s.toUpperCase()+\"_\"+r;if(l in o)return\"@-\"+s.toLowerCase()+\"-\"+n}return!1};C.atRule=z;var N=C.prefixed=function(e,n,t){return 0===e.indexOf(\"@\")?z(e):(-1!=e.indexOf(\"-\")&&(e=c(e)),n?g(e,n,t):g(e,\"pfx\"))};Modernizr.addTest(\"requestanimationframe\",!!N(\"requestAnimationFrame\",e),{aliases:[\"raf\"]}),Modernizr.addTest(\"pagevisibility\",!!N(\"hidden\",n,!1)),Modernizr.addTest(\"video\",function(){var e=a(\"video\"),n=!1;try{n=!!e.canPlayType,n&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs=\"theora\"').replace(/^no$/,\"\"),n.h264=e.canPlayType('video/mp4; codecs=\"avc1.42E01E\"').replace(/^no$/,\"\"),n.webm=e.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/,\"\"),n.vp9=e.canPlayType('video/webm; codecs=\"vp9\"').replace(/^no$/,\"\"),n.hls=e.canPlayType('application/x-mpegURL; codecs=\"avc1.42E01E\"').replace(/^no$/,\"\"))}catch(t){}return n}),Modernizr.addTest(\"webgl\",function(){var n=a(\"canvas\"),t=\"probablySupportsContext\"in n?\"probablySupportsContext\":\"supportsContext\";return t in n?n[t](\"webgl\")||n[t](\"experimental-webgl\"):\"WebGLRenderingContext\"in e});var q=C.testStyles=l;Modernizr.addTest(\"formvalidation\",function(){var n=a(\"form\");if(!(\"checkValidity\"in n&&\"addEventListener\"in n))return!1;if(\"reportValidity\"in n)return!0;var t,r=!1;return Modernizr.formvalidationapi=!0,n.addEventListener(\"submit\",function(n){(!e.opera||e.operamini)&&n.preventDefault(),n.stopPropagation()},!1),n.innerHTML='<input name=\"modTest\" required=\"required\" /><button></button>',q(\"#modernizr form{position:absolute;top:-99999em}\",function(e){e.appendChild(n),t=n.getElementsByTagName(\"input\")[0],t.addEventListener(\"invalid\",function(e){r=!0,e.preventDefault(),e.stopPropagation()},!1),Modernizr.formvalidationmessage=!!t.validationMessage,n.getElementsByTagName(\"button\")[0].click()}),r}),Modernizr.addTest(\"devicemotion\",\"DeviceMotionEvent\"in e),Modernizr.addTest(\"deviceorientation\",\"DeviceOrientationEvent\"in e),Modernizr.addTest(\"getUserMedia\",\"mediaDevices\"in navigator&&\"getUserMedia\"in navigator.mediaDevices),i(),o(b),delete C.addTest,delete C.addAsyncTest;for(var M=0;M<Modernizr._q.length;M++)Modernizr._q[M]();e.Modernizr=Modernizr}(window,document));\nexport default window.Modernizr;\n","import {curry, forEachObjIndexed, pick as _pick, __} from \"ramda\";\n\nconst listeners = {};\nconst state     = load();\n\nexport const pick = keys => _pick(keys, state);\n\nexport const get = key => state[key];\n\nexport const getState = () => ({...state});\n\nexport const set = curry((key, value) => {\n    if (state[key] !== value) {\n        state[key] = value;\n        trigger(key, value);\n    }\n    return value;\n});\n\nexport const update = object => {\n    forEachObjIndexed((value, key) => set(key, value), object);\n    return object;\n};\n\nexport const on = curry((key, fn) => {\n    if (listeners[key]) {\n        listeners[key].push(fn);\n    } else {\n        listeners[key] = [fn];\n    }\n    return fn;\n});\n\nexport const once = (key, fn) => {\n    const f1 = on(key, (val) => {\n        fn(val);\n        off(key, f1);\n    });\n};\n\nexport const off = curry((key, fn) => {\n    listeners[key] = listeners[key].filter(f => f !== fn);\n});\n\nexport const setter = curry((key, value) => () => set(key, value));\n\nexport function save (keys = [\"agreed_to_terms\"]) {\n    const toSave     = pick(keys);\n    const savedState = load();\n    localStorage.setItem(\"oreo-state\", JSON.stringify({...savedState, ...toSave}));\n}\n\nexport function clear (array = Object.keys(state)) {\n    clearLS(array);\n    array.forEach(key => {\n        delete state[key];\n        trigger(key, undefined);\n    });\n}\n\nexport function clearLS (array) {\n    const savedState = load();\n    array.forEach(key => {\n        delete savedState[key];\n    });\n    localStorage.setItem(\"oreo-state\", JSON.stringify(savedState));\n}\n\nfunction load () {\n    const savedState = localStorage.getItem(\"oreo-state\");\n    if (savedState) {\n        return JSON.parse(savedState);\n    } else {\n        return {};\n    }\n}\n\nfunction trigger (key, value) {\n    //console.log(\"state.trigger\", key, value);\n    if (listeners[key]) {\n        //console.log(\"state.trigger inside if\", key, value);\n        listeners[key].forEach(fn => {\n            //console.log(\"calling function with \", value);\n            fn(value);\n        });\n    }\n}\n","import events from \"../../data/analytics\";\nimport {get} from \"../state\";\n\nconst createEvent = data => () =>\n    (\"ga\" in window) && window.ga(\"send\", \"event\", data.category, data.action, data.label);\n\nconst all_events = events.reduce((acc, data) => {\n    if (data.name === \"experience_type\") {\n        acc[data.name] = () => {\n            if (\"ga\" in window) {\n                window.ga(\"send\", \"event\", data.category, data.action, get(\"upload_type\") === \"amoe\" ? \"amoe\" : \"3dof\");\n            }\n        };\n    } else if (data.name === \"frame_rate_avg\") {\n        acc[data.name] = (fps) => {\n            if (\"ga\" in window) {\n                window.ga(\"send\", \"event\", data.category, data.action, data.label, fps);\n            }\n        };\n    } else {\n        acc[data.name] = createEvent(data);\n    }\n    return acc;\n}, {});\n\nexport default all_events;\n","import Modernizr from \"./modernizr\";\nimport ga_events from \"./analytics/ga-events\";\n\nconst constraints = {\n    \"audio\" : false,\n    \"video\" : {\n        facingMode : \"environment\",\n        width      : Modernizr.mq(\"(max-width: 839px)\") ? undefined : 1280\n    }\n};\n\nlet stream;\nlet LOADING = false;\nlet CANCEL  = true;\n\nexport const hasStream = () => Boolean(stream);\n\nexport const getStream = async () => {\n    if (Modernizr.getusermedia) {\n        if (!stream) {\n            LOADING = true;\n            stream = await navigator.mediaDevices.getUserMedia(constraints);\n            ga_events.allowed_camera();\n            document.body.classList.add(\"scanning\");\n        }\n        if (CANCEL) {\n            CANCEL = false;\n            stopStream();\n        }\n        LOADING = false;\n        return stream;\n    } else {\n        return await Promise.reject(new Error(\"getUserMedia not supported\"));\n    }\n};\n\nexport const stopStream = async () => {\n    if (LOADING) {\n        CANCEL = true;\n        return;\n    }\n    if (stream) {\n        Array.from(stream.getVideoTracks()).forEach(track => {\n            track.stop();\n        });\n        stream = null;\n        document.body.classList.remove(\"scanning\");\n    } else {\n        return false;\n    }\n};\n","import config from \"../data/config\";\nimport {pipe, head, allPass, propEq, propSatisfies, lt} from \"ramda\";\n\nconst MODEL_URL = `tensorflow/model.json`;\nconst {WIDTH, HEIGHT, OREO_CLASSES, REAL} = config.tensorflow;\n\nconst valueSort = (a, b) => b.value - a.value;\nconst toObj     = (value, i) => ({value, label: OREO_CLASSES[i]});\nconst topK      = 3;\n\nlet rafId = null;\nlet canvas;\nlet model;\nlet ctx;\nlet vid;\n\nlet LOADING = false;\nlet CANCEL  = false;\nlet tf;\n\nconst after = ms => new Promise((resolve) => setTimeout(resolve, ms));\nexport const load_model = async () => {\n    try {\n        console.log(\"tensorflow :: loading tf.js\");\n        tf = await import(\"@tensorflow/tfjs\");\n        console.log(\"tensorflow :: loading model\");\n        model = await tf.loadModel(MODEL_URL);\n        console.log(\"tensorflow :: model loaded\");\n        console.log(\"tensorflow :: running first prediction\");\n        const trash = await firstPrediction();\n\n        // huge garbage collection after doing first prediction, waiting here for that to complete so we don't clobber animations\n        const x     = await after(500);\n\n        console.log(\"tensorflow :: first prediction completed\");\n        return true;\n    } catch (e) {\n        console.error(e);\n        throw e;\n    }\n};\n\n// reject :: string -> Promise(Error(String))\nconst reject = string => Promise.reject(new Error(string));\n\n// isLoaded :: () -> Boolean\nexport const isLoaded = () => {\n    return vid && model;\n};\n\n// firstPrediction :: () -> [Prediction]\nconst firstPrediction = async () => {\n    canvas        = canvas || document.createElement(\"canvas\");\n    ctx           = canvas.getContext(\"2d\");\n    canvas.width  = WIDTH;\n    canvas.height = HEIGHT;\n    // the first prediction is very slow, run this first.\n\n    const pixels = tf.fromPixels(canvas);\n\n    let preprocessedInput = pixels\n        .resizeNearestNeighbor([224, 224])\n        .toFloat();\n\n    preprocessedInput = tf.div(preprocessedInput, 255);\n\n    const reshapedInput = preprocessedInput.reshape([1, ...preprocessedInput.shape]);\n    const logits = model.predict(reshapedInput);\n    console.log(\"logits: \", logits);\n    const predictions = tf.tidy(() => logits);\n    console.log('predictions: ', predictions);\n    return predictions.data().then(() => {\n        predictions.dispose();\n    });\n};\n\n// drawToCanvas :: () -> {}\nconst drawToCanvas = () => {\n    ctx.drawImage(vid,\n        0, 0, vid.videoWidth, vid.videoHeight,\n        0, 0, WIDTH, HEIGHT\n    );\n};\n\n// oreoFound :: [Prediction] -> Boolean\nconst oreoFound = pipe(\n    head,\n    allPass([\n        propEq(\"label\", REAL),\n        propSatisfies(lt(config.tensorflow.threshold), \"value\")\n    ])\n);\n\nconst findLoop = callback => async function loop () {\n    const predictions = await predict();\n    if (rafId === null) {\n        // tf was stopped\n        return;\n    }\n    if (oreoFound(predictions)) {\n        rafId = null;\n        callback(true);\n    } else {\n        rafId = setTimeout(loop, config.tensorflow.samplerate);\n    }\n};\n\nexport const hasModel   = () => Boolean(model);\nexport const isScanning = () => Boolean(rafId);\n\n// load :: Video -> Promise(Model)\nexport const load = async (video) => {\n    if (video && video instanceof HTMLVideoElement) {\n        vid = video;\n    } else {\n        return Promise.reject(new Error(\"You must pass a video element to load\"));\n    }\n\n    if (!tf) {\n        tf = await import(\"@tensorflow/tfjs\");\n    }\n\n    LOADING = true;\n    if (!model) {\n        model = await tf.loadModel(MODEL_URL);\n        if (CANCEL) {\n            LOADING = CANCEL = false;\n            dispose();\n        }\n\n        // run the first prediction\n        await firstPrediction();\n\n        if (CANCEL) {\n            LOADING = CANCEL = false;\n            dispose();\n        }\n    }\n\n    LOADING = false;\n    // return the loaded model\n    return model;\n};\n\n// find :: () -> {}\nexport const find = callback => {\n    rafId = null;\n    clearTimeout(rafId);\n    if (isLoaded()) {\n        rafId = setTimeout(findLoop(callback), config.tensorflow.samplerate);\n    } else {\n        console.error(\"model is not loaded\");\n    }\n};\n\n// stop :: () -> {}\nexport const stop = () => {\n    rafId = null;\n    clearTimeout(rafId);\n};\n\n// dispose :: () -> {}\nexport const dispose = () => {\n    if (LOADING) {\n        CANCEL = true;\n        return;\n    }\n    stop();\n    if (model) {\n        model.dispose();\n        model = null;\n    }\n    if (vid) {\n        vid = null;\n    }\n};\n\n// predict () -> [Prediction]\nexport const predict = () => {\n    if (!isLoaded()) {\n        return reject(\"model is not loaded\");\n    };\n\n    drawToCanvas(vid);\n    const predictions = getPredictions();\n\n    /* const pixels = tf.fromPixels(canvas);\n\n    let preprocessedInput = pixels\n        .resizeNearestNeighbor([224, 224])\n        .toFloat();\n\n    preprocessedInput = tf.div(preprocessedInput, 255);\n\n    const reshapedInput = preprocessedInput.reshape([1, ...preprocessedInput.shape]);\n    const logits = model.predict(reshapedInput);\n    const predictions = tf.tidy(() => logits); */\n    return predictions.data().then(values => {\n        predictions.dispose();\n        return Array.from(values).map(toObj).sort(valueSort).slice(0, topK);\n    });\n};\n\nconst getPredictions = () => tf.tidy(() => {\n    const pixels = tf.fromPixels(canvas);\n\n    let preprocessedInput = pixels\n        .resizeNearestNeighbor([224, 224])\n        .toFloat();\n\n    preprocessedInput = tf.div(preprocessedInput, 255);\n\n    const reshapedInput = preprocessedInput.reshape([1, ...preprocessedInput.shape]);\n\n    return model.predict(reshapedInput);\n});\n\nexport const getCanvas = () => canvas;\n","import React, {Component} from \"react\";\nimport {initCamera, initSrc} from \"../interfaces/video\";\nimport {getStream} from \"../interfaces/getUserMedia\";\nimport * as tensorflow from \"../interfaces/tensorflow\";\nimport * as state from \"../interfaces/state\";\nimport config from \"../data/config\";\n\nclass TensorflowTest extends Component {\n    static getMetadata () {\n        return {\n            path      : \"/debug/tensorflow\",\n            container : \".debug-tensorflow\"\n        };\n    }\n    constructor (props) {\n        super(props);\n        this.state = {\n            ready       : false,\n            predictions : [],\n            widthFirst  : \"0vw\",\n            widthSecond : \"0vw\",\n            widthThird  : \"0vw\"\n        };\n\n        state.on(\"settings/tensorflow-test/video-src\", src => {\n            if (this.video) {\n                initSrc(`/assets/video/${src}.mp4`, this.video);\n            }\n        });\n    }\n    componentDidMount () {\n        const onComplete = () => {\n            this.canvas = tensorflow.getCanvas();\n            this.ctx    = this.canvas.getContext(\"2d\");\n            //this.ctx.filter  = \"brighness(300%)\";\n            this.setState({ready: true});\n            predict();\n        };\n        const onError = error => {\n            console.log(\"error enabling camera\", error);\n            console.log(error.stack);\n        };\n\n        const predict = async () => {\n            const predictions = await tensorflow.predict();\n            this.setState({predictions});\n            this.tid = setTimeout(predict, config.tensorflow.samplerate);\n        };\n\n        tensorflow.load(this.refs.video)\n            .then(getStream)\n            .then(initCamera(this.refs.video))\n            .then(onComplete)\n            .catch(onError);\n        \n    }\n    componentDidUpdate(prePros) {\n        if (!this.state.predictions || !this.state.predictions[0]) {\n            return \"\";\n        }\n        const p = this.state.predictions;\n        const w2 = (p[2].value * 100).toFixed(2);\n        console.log(\"component updated: \", w2);\n        if(w2 > 0.6) {\n            console.log(\"go to next\");\n            tensorflow.stop();\n            window.location.assign('https://www.oreo.com/');\n\n        }\n    }\n    componentWillUnmount () {\n        this.canvas = null;\n        clearTimeout(this.tid);\n        tensorflow.stop();\n        tensorflow.dispose();\n    }\n    render () {\n        return (\n            <div className=\"container tensorflow-test\">\n                <video className=\"test-video\" ref=\"video\" muted playsInline autoPlay></video>\n                <div className=\"canvas-container\"></div>\n                {this.renderPredictionGraph()}\n            </div>\n        );\n    }\n\n    renderPredictionGraph () {\n        if (!this.state.predictions || !this.state.predictions[0]) {\n            return \"\";\n        }\n        const p = this.state.predictions;\n        const w0 = (p[0].value * 100).toFixed(2);\n        const w1 = (p[1].value * 100).toFixed(2);\n        const w2 = (p[2].value * 100).toFixed(2);\n        const styles = {\n            container1 : {\n                zIndex          : 200,\n                overflowX       : \"visible\",\n                backgroundColor : 'red',\n                position        : \"absolute\",\n                transition      : \"all 2s\",\n                textAlign       : \"left\",\n                color           : \"white\",\n                fontFamily      : \"PlutoRegular\",\n                top             : \"-50px\"\n            },\n            container2 : {\n                zIndex          : 200,\n                backgroundColor : 'black',\n                overflow        : \"visible\",\n                position        : \"absolute\",\n                transition      : \"width 2s\",\n                color           : \"white\",\n                textAlign       : \"left\",\n                fontFamily      : \"PlutoRegular\",\n                top             : \"-25px\"\n            },\n            container3 : {\n                zIndex          : 200,\n                backgroundColor : 'blue',\n                overflow        : \"visible\",\n                position        : \"absolute\",\n                transition      : \"width 2s\",\n                color           : \"white\",\n                textAlign       : \"left\",\n                fontFamily      : \"PlutoRegular\"\n            },\n            spanStyle : {\n                position   : \"relative\",\n                color      : \"white\",\n                fontFamily : \"PlutoRegular\",\n                display    : \"block\",\n                width      : \"100vw\"\n            },\n            holder : {\n                overflow : \"Visible\",\n                bottom   : \"50px\",\n                left     : \"0px\",\n                position : \"absolute\"\n            }\n        };\n        const { container1, container2, container3, spanStyle, holder } = styles;\n        return (\n            <div style={holder}>\n                {this.state.predictions[0] &&\n                    <div >\n                        <div style={container1}>\n                            <span style={spanStyle}>{p[0].label + \": \" + w2}</span>\n\n                        </div>\n                        <div style={container2}>\n                            <span style={spanStyle}>{p[1].label + \": \" + w0}</span>\n                        </div>\n                        <div style={container3}>\n                            <span style={spanStyle}>{p[2].label + \": \" + w1}</span>\n                        </div>\n                    </div>\n                }\n            </div>\n        );\n    }\n\n    renderPredictions () {\n        return (<table>\n            <thead>\n                <tr>\n                    <th>Class</th>\n                    <th>Confidence</th>\n                </tr>\n            </thead>\n            <tbody>\n                {this.state.predictions.map((prediction, i) => (\n                    <tr key={i}>\n                        <td>{prediction.label}</td>\n                        <td>{prediction.value.toFixed(2)}</td>\n                    </tr>\n                ))}\n            </tbody>\n        </table>);\n    }\n    renderTop () {\n        const top = this.state.predictions[0];\n        if (top && top.value > 0.8) {\n            return (<div>Predicted {top.label} with {parseInt(top.value * 100)}% confidence</div>);\n        } else {\n            return (<div>Nothing met confidence threshold</div>);;\n        }\n    }\n}\nexport default TensorflowTest;\n","const LONG_DURATION    = 1000;\nconst DEFAULT_DURATION = 600;\nconst SHORT_DURATION   = 300;\nconst SWIPE_DISTANCE   = Math.min(500, window.innerWidth);\n\nexport const longDuration    = {duration: LONG_DURATION};\nexport const defaultDuration = {duration: DEFAULT_DURATION};\nexport const shortDuration   = {duration: SHORT_DURATION};\n\nexport const fadeIn          = {opacity: {value: 1}};\nexport const fadeOut         = {opacity: {value: 0}};\n\nexport const easeOutQuad     = {easing: \"easeOutQuad\"};\nexport const easeInQuad      = {easing: \"easeInQuad\"};\nexport const easeInOutQuad   = {easing: \"easeInOutCubic\"};\n\nexport const fadeEnter = {\n    opacity  : [0, 1],\n    easing   : \"linear\",\n    duration : SHORT_DURATION,\n    delay    : SHORT_DURATION\n};\n\nexport const fadeExit = {\n    opacity  : [1, 0],\n    easing   : \"linear\",\n    duration : SHORT_DURATION\n};\n\nexport const exitToLeft = {\n    ...defaultDuration,\n    ...fadeOut,\n    ...easeInOutQuad,\n    ...{\n        translateX : {\n            value : -SWIPE_DISTANCE\n        }\n    }\n};\n\nexport const exitToRight = {\n    ...defaultDuration,\n    ...fadeOut,\n    ...easeInOutQuad,\n    ...{\n        translateX : {\n            value : SWIPE_DISTANCE\n        }\n    }\n};\n\nexport const enterFromLeft = {\n    ...defaultDuration,\n    ...fadeIn,\n    ...easeInOutQuad,\n    ...{\n        translateX : {\n            value : [SWIPE_DISTANCE, 0]\n        }\n    }\n};\n\nexport const enterFromRight = {\n    ...defaultDuration,\n    ...fadeIn,\n    ...easeInOutQuad,\n    ...{\n        translateX : {\n            value : [-SWIPE_DISTANCE, 0]\n        }\n    }\n};\n","/*\n    animations/index.js\n\n    This just contains some helper classes to use across the app for creating and playing animations.\n    The rationale with this folder in general is to keep all animations here, so they can be re-used in different places.\n\n */\n\nimport {mergeDeepRight, curryN, pipe, keys, length, converge, assoc, identity} from \"ramda\";\nimport anime from \"animejs\";\nimport * as common from \"./common\";\n\n/*\n    mergeTimeline :: [AnimeJSParams] -> [AnimeJSParams]\n\n    This function allows you to merge two arrays of objects together\n    This allows you to specify the \"pre-runtime\" part of an animation such as duration, easings, etc.\n    and then later, you can specify the runtime part of it (the targets) as well as override any default params\n*/\nconst mergeTimeline = curryN(2, pipe(\n    mergeDeepRight,\n    converge(assoc(\"length\"), [\n        pipe(keys, length),\n        identity\n    ]),\n    Array.from\n));\n\n/*\n    Animation :: -> AnimeJSParams -> AnimeJSParams -> AnimeJSAnimation\n    This function allows you to specify some default params, then returns a funtion that accepts runtime params,\n    returns a new animation\n */\nexport const Animation = params =>\n    runtime =>\n        anime(runtime ? mergeDeepRight(params, runtime) : params);\n/*\n    Timeline :: ([AnimeJSParmas], AnimeTimelineParams) -> [AnimeJSParams] -> AnimeJSAnimation\n    Similar to the above, except it works with timelines (as arrays), it will handle adding each element of the array\n    automatically\n */\nexport const Timeline = (list, init) =>\n    runtime =>\n        (runtime ? mergeTimeline(list, runtime) : list).reduce((tl, el) =>\n            tl.add(el), anime.timeline(init));\n\n// default fade in/out transitions, used on all routes\nexport const fadeEnter = Animation(common.fadeEnter);\nexport const fadeExit  = Animation(common.fadeExit);\n","/*\n    animations and timnings for the scanning animation (after you scan a cookie)\n    not sure if this is currently used uo be honest since we've redone the scanning animation\n */\nimport {Animation} from \".\";\n\nexport const timings = {\n    scanningDuration      : 6000, // how long the scanning animation lasts in total\n    cookieAppearDelay     : 4000, // how long before the cookie appears\n    overlayRevealDuration : 400\n};\n\nexport const revealOverlay = Animation({\n    targets  : \"#overlay-circle\",\n    r        : target => [window.innerHeight, parseFloat(target.getAttribute(\"r\"))],\n    easing   : \"easeOutQuad\",\n    duration : timings.overlayRevealDuration\n});\n","import {Animation} from \"./index\";\n\nconst prizeRevealDelay = 3000;\nconst prizeRevealDur   = 1000;\n\n// When we're entering the prize reveal, we should fade out more slowly because\n// the prize reveal animation should have the camera behind it for a few seconds\nexport const prizeRevealEnterFadeOut = Animation({\n    opacity  : 0,\n    delay    : prizeRevealDelay,\n    duration : prizeRevealDur,\n    easing   : \"linear\"\n});\n\n// When we're entering prize reveal, we wait a bit to fade in the UI\nexport const prizeRevealEnterFadeIn = Animation({\n    opacity  : 1,\n    delay    : prizeRevealDelay,\n    duration : prizeRevealDur,\n    easing   : \"linear\"\n});\n","import React, {Component} from \"react\";\nimport * as state from \"../interfaces/state\";\nimport {getStream, stopStream, hasStream} from \"../interfaces/getUserMedia\";\nimport {initCamera, initSrc} from \"../interfaces/video\";\nimport {fadeEnter, fadeExit, Animation} from \"../animations\";\nimport * as tf from \"../interfaces/tensorflow\";\nimport config from \"../data/config\";\nimport {timings} from \"../animations/scanning\";\nimport {pipe, path, repeat, useWith, complement, equals, __} from \"ramda\";\nimport {prizeRevealEnterFadeOut} from \"../animations/prize-reveal\";\n\nconst pathChanged     = pipe(path, repeat(__, 2), useWith(complement(equals)));\nconst locationChanged = pathChanged([\"location\", \"pathname\"]);\nconst webGLStatusChanged = pathChanged([\"webgl_status\"]);\n\nconst prizeRevealFade = Animation({\n    targets  : \".camera-wrapper\",\n    opacity  : 0,\n    delay    : 5000,\n    duration : 1000,\n    easing   : \"linear\"\n});\n\nconst debugProceed = ctx => {\n    let count = 0;\n\n    const onclick = () => {\n        if (++count >= 3) {\n            ctx.onFoundCookie();\n            remove();\n        }\n    };\n\n    const remove = () => {\n        window.removeEventListener(\"mousedown\", onclick);\n        window.removeEventListener(\"touchstart\", onclick);\n    };\n\n    window.addEventListener(\"mousedown\", onclick);\n    window.addEventListener(\"touchstart\", onclick);\n\n    return remove;\n};\n\nclass Scanner extends Component {\n    static getMetadata () {\n        return {\n            path            : \"/(scan|scanning-tips|twist|prize-reveal|lose|consolation|second-attempt|faq)\",\n            globalStateKeys : [\"webgl_status\", \"upload_type\"],\n            key             : \"scanner\",\n            exact           : false\n        };\n    }\n    constructor (props) {\n        super(props);\n        console.log(\"constructor:   \");\n        this.showing = false;\n        this.video   = React.createRef();\n\n        this.show = () => {\n            if (!this.showing) {\n                console.log(\"scanner :: showing\");\n                this.showing = true;\n                fadeEnter({targets: \".camera-wrapper\"});\n                if (config.tensorflow.debugProceed && this.props.location.pathname === \"/scan\") {\n                    this.removeDebugListeners = debugProceed(this);\n                }\n            }\n        };\n\n        this.hide = () => {\n            if (this.showing) {\n                console.log(\"scanner :: hiding\");\n                this.showing = false;\n                fadeExit({targets: \".camera-wrapper\"});\n                if (this.removeDebugListeners) {\n                    this.removeDebugListeners();\n                    this.removeDebugListeners = null;\n                }\n            }\n        };\n\n        this.onFoundCookie = () => {\n            console.log(\"scanner :: found cookie\");\n            tf.stop();\n            state.set(\"upload_type\", \"product\");\n            state.set(\"found_cookie\", true);\n            state.set(\"scanning\", false);\n        };\n\n        this.onError = error => {\n            console.warn(\"error loading scanner\");\n            console.log(error);\n            this.props.history.push(\"/enter-without-camera\");\n        };\n\n        this.loadVideoStream = () => {\n            console.log(\"scanner :: loading video stream\");\n            return getStream()\n                .then(initCamera(this.video.current));\n        };\n\n        this.loadTensorflow = () => {\n            console.log(\"scanner :: loading tensorflow\");\n            return tf.load(this.video.current);\n        };\n\n        this.startTf = () => {\n            console.log(\"scanner :: starting cookie scanner\");\n            this.show();\n            // because we start animations on scanning = true, adding a delay here before we actually start\n            // scanning to that tensorflow does not clobber the app's framerate\n\n            setTimeout(() => {\n                tf.find(this.onFoundCookie);\n            }, timings.overlayRevealDuration);\n\n            state.set(\"scanning\", true);\n        };\n\n        this.startScanning = () => this.loadTensorflow()\n            .then(this.loadVideoStream)\n            .then(this.startTf)\n            .then(this.show)\n            .catch(this.onError);\n\n        // during dev we can jump directly to the twist page, this function starts the video in that case\n        this.onJumpedToTwistPage = () => {\n            tf.dispose();\n            if (hasStream()) {\n                this.show();\n            } else {\n                this.loadVideoStream()\n                    .then(this.show)\n                    .catch((error) => {\n                        this.hide();\n                        console.error(error);\n                    });\n            }\n        };\n\n        this.enterPrizeReveal = () => {\n            console.log(\"scanner :: entering prize reveal page\");\n            const finished = prizeRevealEnterFadeOut({targets: \".camera-wrapper\"}).finished;\n            finished.then(() => {\n                console.log(\"scanner :: stopping tensorflow and video stream\");\n                //tf.dispose();\n                stopStream();\n            });\n        };\n    }\n    onPathChange () {\n        const path = this.props.location.pathname;\n        console.log(\"scanner :: path changed \", path);\n        switch (path) {\n            case \"/scan\":\n                console.log(\"scanner :: returning to scan page from another page\");\n                // we're returning to the scan page, so start tensroflow\n                if (tf.isLoaded()) {\n                    console.log(\"scanner :: tf was already loaded\");\n                    if (hasStream()) {\n                        console.log(\"scanner :: already had a media stream\");\n                        this.startTf();\n                    } else {\n                        console.log(\"scanner :: did not have a media stream, loading new media stream\");\n                        this.startScanning();\n                    }\n                } else {\n                    console.log(\"scanner :: tensorflow wasn't loaded, loading now\");\n                    this.startScanning();\n                }\n                break;\n            case \"/faq\":\n            case \"/scanning-tips\":\n                state.set(\"scanning\", false);\n                // stop tensroflow, and fade out the video\n                console.log(\"scanner :: entered scanning tips page, stopping tensorflow, and hiding the video\");\n                stopStream();\n                tf.stop();\n                this.hide();\n                // when entering scanning tips, fade out\n                break;\n            case \"/twist\":\n                console.log(\"scanner :: arrived directly on twist page\");\n                this.onJumpedToTwistPage();\n                break;\n            // on any of the below, just fade out\n            case \"/prize-reveal\":\n            case \"/lose\":\n            case \"/consolation\":\n            case \"/second-attempt\":\n                state.set(\"scanning\", false);\n                console.log(\"scanner :: landed on prize page\");\n                if (this.props.webgl_status === \"entering\") {\n                    console.log(\"scanner :: prize reveal was loaded, calling enterPrizeReveal\");\n                    this.enterPrizeReveal();\n                } else {\n                    console.log(\"scanner :: prize reveal isn't loaded yet, waiting...\");\n                    this.onPrizeRevealLoaded = this.enterPrizeReveal;\n                }\n                break;\n            default:\n                console.log(`scanner :: scanner should not exist on pathname:: ${this.props.location.pathname}`);\n        }\n    }\n    onWebGLStatusChange (status) {\n        if (status === \"entering\" && this.onPrizeRevealLoaded && /prize|lose|consolation|second/.test(this.props.location.pathname)) {\n            console.log(\"scanner :: prize reveal was loaded, starting fade out\");\n            this.onPrizeRevealLoaded();\n            this.onPrizeRevealLoaded = null;\n        }\n    }\n    componentDidUpdate (prevProps) {\n        if (this.props.upload_type === \"amoe\") {\n            return;\n        }\n\n        if (webGLStatusChanged(prevProps, this.props)) {\n            this.onWebGLStatusChange(this.props.webgl_status);\n        }\n\n        if (locationChanged(prevProps, this.props)) {\n            this.onPathChange(this);\n        }\n    }\n    componentWillUnmount () {\n        if (this.removeDebugListeners) {\n            this.removeDebugListeners();\n        }\n        state.set(\"scanning\", false);\n        tf.dispose();\n        stopStream();\n    }\n    componentDidMount () {\n        this.startScanning();\n        // this.onJumpedToTwistPage();\n    }\n    onEntered () {\n        if (this.props.upload_type === \"amoe\") {\n            return;\n        }\n        console.log(\"scanner :: on entered\");\n\n        switch (this.props.location.pathname) {\n            case \"/scan\":\n                this.startScanning();\n                break;\n\n            // if we jumped directly to these pages (during dev), jus show the camera\n            case \"/twist\":\n                this.onJumpedToTwistPage();\n                break;\n            case \"/prize-reveal\":\n            case \"/lose\":\n            case \"/consolation\":\n            case \"/second-attempt\":\n                break;\n\n        }\n    }\n    onEnter () {\n        console.log(\"scanner :: on enter\");\n        // intentional no-op here\n    }\n    onExit () {\n        console.log(\"scanner :: on exit\");\n        fadeExit({targets: \".camera-wrapper\"});\n    }\n    render () {\n        if (this.props.upload_type === \"amoe\") {\n            return \"\";\n        } else {\n            return (\n                <div className=\"camera-wrapper\" style={{opacity: 0}}>\n                    <video className=\"scan-camera\" muted playsInline autoPlay loop ref={this.video}></video>\n                </div>\n            );\n        }\n    }\n}\nexport default Scanner;\n","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport TensorflowTest from \"./tensorflow-test\";\nimport Scanner from \"./scanner\";\nfunction App() {\n  return (\n    <div className=\"App\">\n      <TensorflowTest></TensorflowTest>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}